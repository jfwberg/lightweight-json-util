<template>
    <lightning-card icon-name="standard:customer_portal_users" variant="base">
        
        <lightning-spinner 
          alternative-text="Loading" 
          size="large"
          variant="base"
          if:true={loading}
        ></lightning-spinner>

        <div slot="title">
            Create a Data Table or CSV from a JSON String
        </div>
        <div slot="actions">
            <lightning-button-group>
                <lightning-button 
                    variant="neutral"
                    label="LWC Data Table" 
                    onclick={handleClickCreateTable} 
                ></lightning-button>
                <lightning-button 
                        variant="neutral"
                        label="Console Table" 
                        onclick={handleClickCreateConsole} 
                ></lightning-button>
                <lightning-button 
                        variant="neutral"
                        label="CSV String" 
                        onclick={handleClickCreateCsv} 
                ></lightning-button>
            </lightning-button-group>
        </div>
        
        <div class="slds-p-around_x-small">
            
            <div class="slds-var-p-bottom_medium">
                <div class="slds-form-element">
                    <div class="slds-form-element__control">
                        <textarea id="ta" placeholder="JSON String..." class="slds-textarea ta" onchange={handleChangeJsonString}>{jsonString}</textarea>
                    </div>
                </div>
            </div>
            
            <div class="slds-var-p-bottom_medium">
                <lightning-input 
                  type="checkbox"
                  label="Add number column?"
                  name="numberColumn"
                  checked={numberColumn}
                  onchange={handleChangeNumberColumn}
                ></lightning-input>
            </div>
            
            <div class="slds-var-p-bottom_medium">
                <span class="slds-text-title">Child List Name Filter</span>
                <span class="slds-var-p-around_small slds-size_large custom-helptext">
                    <lightning-helptext 
                        content="Select this to remove the name of a node from the path name. I.e. if you filter the value 'records', the path for 'Contacts.records.Id' becomes 'Contacts.Id'">
                    </lightning-helptext>
                 </span>
                <lightning-input 
                    variant = "label-hidden"
                    type="text"
                    label="Child List Name Filter"
                    name="listNameFilter"
                    value = {listNameFilter}
                    onchange={handleChangeListNameFilter}
                ></lightning-input>
            </div>
            
            <div class="slds-var-p-bottom_medium">
                <span class="slds-text-title">Attribute filters</span>
                <span class="slds-var-p-around_small slds-size_large custom-helptext">
                    <lightning-helptext 
                        content="Attribute names in this field are removed from the result.">
                    </lightning-helptext>
                </span>
                <lightning-input 
                    variant = "label-hidden"
                    type="text"
                    label="Attribute filters"
                    value={attributeFilter}
                    onchange={handleChangeAttributeFilter}
                ></lightning-input> 
            </div>
        </div>
    </lightning-card>
</template>